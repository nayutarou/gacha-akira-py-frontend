# ガチャシミュレーター (React Frontend)

このプロジェクトは、シンプルなガチャシミュレーターのフロントエンドアプリケーションです。バックエンドAPIと連携し、単発ガチャや10連ガチャの結果を表示し、履歴や統計情報を提供します。

## 目次

- [機能](#機能)
- [技術スタック](#技術スタック)
- [セットアップ](#セットアップ)
  - [前提条件](#前提条件)
  - [インストール](#インストール)
  - [開発サーバーの起動](#開発サーバーの起動)
  - [ビルド](#ビルド)
  - [テストの実行](#テストの実行)
- [プロジェクト構造](#プロジェクト構造)
- [貢献](#貢献)
- [ライセンス](#ライセンス)

## 機能

- **単発ガチャ**: 1回ガチャを引きます。
- **10連ガチャ**: 10回ガチャを引きます。
- **ガチャ結果表示**: 引いたガチャの結果（レアリティ）を視覚的に表示します。
- **ガチャ統計**: 各レアリティの排出回数と排出率を表示します。
- **ガチャ履歴**: これまでに引いたガチャの履歴を一覧で確認できます。
- **履歴リセット**: ガチャの履歴と統計をリセットします。

## アピールポイント

- **こだわりのUI/UX**: ガチャの結果をより楽しんでもらえるように、結果表示にリッチなアニメーションを実装しました。ユーザーが直感的に操作できるよう、シンプルで分かりやすいデザインを心がけました。
- **モダンな技術選定と実践**:
    - **状態管理**: `React Context` を活用し、propsのバケツリレーを避けることで、クリーンで保守性の高い状態管理を実現しています。
    - **開発体験**: `Vite` を採用することで、高速な開発サーバーとビルド環境を構築し、開発効率を大幅に向上させました。
- **品質へのこだわり**:
    - **ユーザー中心のテスト設計**: `Vitest` と `React Testing Library` を採用し、内部実装ではなく**ユーザーの視点**からテストを記述しています。「ボタンをクリックしたら特定のテキストが表示される」といった具体的なシナリオを通じて、コンポーネントが期待通りに機能することを保証します。
    - **コンポーネントの分離と結合**:
        - **ユニットテスト**: 個々のUIコンポーネントが正しく描画・動作することを個別に検証します。
        - **インテグレーションテスト**: 複数のコンポーネントが `GachaContext` と連携し、全体として正しく機能することを確認します。「ガチャを引く」という一連の操作が、結果表示、統計、履歴の各画面に正しく反映されるかをテストしています。
    - **API通信の完全なシミュレーション**: `msw` を活用し、APIの成功時だけでなく、**ローディング中**や**エラー発生時**のUI表示もテストしています。これにより、不安定なネットワーク環境下でもアプリケーションが安定して動作し、ユーザーに適切なフィードバックを提供できることを保証します。

- **CI/CDによる品質保証**:
    - **継続的インテグレーション**: `CircleCI` を活用し、プルリクエストごとに自動でリンターとテストを実行するCIパイプラインを構築しました。コードの品質を常に高く保ち、安全なマージを支援します。

- **効率的な10連ガチャの実装**:
    - **パフォーマンス**: 10連ガチャでは、バックエンドAPIに対して効率的なリクエストを設計し、一度の通信で複数回のガチャ結果を取得します。これにより、サーバーへの負荷を軽減し、ユーザーにスムーズな体験を提供します。

## 技術スタック

- **React**: UI構築のためのJavaScriptライブラリ
- **Vite**: 高速なビルドツールと開発サーバー
- **Tailwind CSS**: 高速なUI開発のためのユーティリティファーストなCSSフレームワーク
- **React Router**: シングルページアプリケーションのルーティング
- **Vitest**: 高速なユニットテストフレームワーク
- **ESLint**: コード品質とスタイルの一貫性を保つためのリンター

## セットアップ

### 前提条件

- Node.js (v18以上を推奨)
- npm または Yarn
- バックエンドAPIが `http://127.0.0.1:8000/gacha` で動作していること

### インストール

プロジェクトのルートディレクトリで以下のコマンドを実行し、依存関係をインストールします。

```bash
npm install
# または
yarn install
```

### 開発サーバーの起動

開発サーバーを起動するには、以下のコマンドを実行します。アプリケーションは通常 `http://localhost:5173` で利用可能になります。

```bash
npm run dev
# または
yarn dev
```

### ビルド

本番環境向けにアプリケーションをビルドするには、以下のコマンドを実行します。ビルドされたファイルは `dist/` ディレクトリに出力されます。

```bash
npm run build
# または
yarn build
```

### テストの実行

ユニットテストを実行するには、以下のコマンドを実行します。

```bash
npm test
# または
yarn test
```

## プロジェクト構造

```
gacha-akira-py-frontend/
├── public/
├── src/
│   ├── api.js             # API通信関連の関数
│   ├── app.jsx            # メインアプリケーションコンポーネント
│   ├── GachaContext.jsx   # ガチャの状態管理用Context
│   ├── main.jsx           # アプリケーションのエントリーポイント
│   ├── styles.css         # グローバルスタイル
│   ├── constants.js       # 定数定義
│   ├── components/        # 再利用可能なUIコンポーネント
│   │   ├── Button.jsx
│   │   ├── GachaCounts.jsx
│   │   ├── GachaHistory.jsx
│   │   ├── Result.jsx
│   │   └── TenPullDisplay.jsx
│   └── pages/             # ページコンポーネント
│       └── HistoryPage.jsx
├── tests/                 # テストファイル
│   ├── App.test.jsx
│   └── ...
├── package.json           # プロジェクトのメタデータと依存関係
├── vite.config.ts         # Viteの設定ファイル
├── tailwind.config.js     # Tailwind CSSの設定ファイル
├── eslint.config.js       # ESLintの設定ファイル
└── README.md              # このファイル
```

## 貢献

貢献を歓迎します！バグ報告、機能提案、プルリクエストなど、お気軽にお寄せください。

## ライセンス

[LICENSE](LICENSE) ファイルを参照してください。
